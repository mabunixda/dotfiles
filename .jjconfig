[snapshot]
#max-new-file-size = "10MiB"

[user]
name = "Martin Buchleitner"
email = "martin@nitram.at"

[ui]
default-command = "status"

diff-formater = "delta"
editor = "nvim"
paginate = "auto"
pager = "bat -p"

diff-formatter = ":git"
conflict-marker-style = "git"

[git] 
private-commits = "description(glob:'wip:*') | description(glob:'private:*')"

[templates]
git_push_bookmark = '"martinvonz/push-" ++ change_id.short()'

[aliases]
l = ['log', '--no-pager', '--reversed']
s = ['status']
forcibly = ["--config-toml=revset-aliases.'immutable_heads()' = 'none()'"]
cat = ["file", "show"]
ci = "commit"
credit = ["file", "annotate"]
d = "diff"
nt = ["new", "trunk()"]
rmt = ["git", "remote"]

[template-aliases]
# Username part of the email address
'format_short_signature(signature)' = 'signature.email().local()'
'format_timestamp(timestamp)' = 'timestamp.ago()'
'format_short_id(id)' = 'id.shortest(6)'

[revsets]
# Changing this from the default `@ | ancestors(immutable_heads().., 2) | heads(immutable_heads())`
# Default found here: https://github.com/martinvonz/jj/blob/2e64bf83fd9b8abf4c9880482ea4ce19492f3139/lib/src/settings.rs#L213
# This is basically the default but hiding any non-local branches
# Note: at some point might want to update this in line with https://github.com/martinvonz/jj/commit/62f0cb8c3f03ade34e8862ba0cd600603fc4a91a
log = "@::trunk() | ((ancestors(immutable_heads().., 2) | heads(immutable_heads())) ~ (remote_bookmarks() ~ bookmarks()) ~ tags())"

[revset-aliases]
"immutable_heads()" = "trunk() | tags() | (trunk().. & ~mine())"

"common_ancestor(a,b)"="heads(::a & ::b)"
"diverge(a,b)"="common_ancestor(a,b)::(a|b)"

[colors]
"prefix" = "cyan"
"rest" = "bright black"

# Also don't highlight divergent stuff (the red ?? is fine with me)
"divergent prefix" = "bright black"
"divergent rest" = "bright black"

"branches" = "yellow"
"git_refs" = "yellow"
"git_head" = "yellow"

"timestamp" = "blue"
"username" = "green"

"working_copy" = { bold = true }
